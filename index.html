<!doctype html>
<html>
<title>YouTube Video Timer</title>

<script>
  window.YTAPILoaded = new Promise(resolve => {
    window.onYouTubeIframeAPIReady = () => {
      resolve(window.YT);
    };
  });
</script>
<script src="https://www.youtube.com/iframe_api"></script>
<script defer>'use strict'; setTimeout(async () => {
  const YT = await window.YTAPILoaded;
  const mainEl = document.querySelector('#main');
  
  const placeholder = document.createElement('span');
  mainEl.appendChild(placeholder);
  const player = new YT.Player(placeholder, {
    videoId: '3gJHBA1go5I',
    playerVars: {
      rel: 0, // related videos overlay
      controls: 1,
      iv_load_policy: 3, // disabled annotations
      loop: 1,
      modestbranding: 1,
    },
    onStateChange(event) {
      if (event.data == YT.PlayerState.PAUSED) {
        document.body.appendChild(document.createTextNode(player.getCurrentTime()));
      }
    }
  });
});</script>

<h1>YouTube Video Timer</h1>

<p>
  You can use <kbd>,</kbd> and <kbd>.</kbd> to seek backwards
  and forwards by single frames in the YouTube player. You
  may need to click to focus it first.
</p>

<main id="main"></main>

<style>
  html {
    font-family: Georgia, serif;
  }
  
  body {
    max-width: 800px;
  }
</style>
  