<!doctype html>
<html>
<title>YouTube Video Timer</title>

<script>
  window.YTAPILoaded = new Promise(resolve => {
    window.onYouTubeIframeAPIReady = () => {
      resolve(window.YT);
    };
  });
</script>
<script src="https://www.youtube.com/iframe_api"></script>
<script>'use strict'; setTimeout(async () => {
  const YT = await window.YTAPILoaded;
  const mainEl = document.querySelector('#main');
  
  const placeholder = document.createElement('span');
  mainEl.appendChild(placeholder);
  const player = new YT.Player(placeholder, {
    videoId: '3gJHBA1go5I',
    playerVars: {
      rel: 0, // related videos overlay
      controls: 1,
      iv_load_policy: 3, // disabled annotations
      loop: 1,
      modestbranding: 1,
      autoplay: 1,
    },
    events: {
      onStateChange(event) {
        console.log(event);
        document.body.appendChild(document.createTextNode(player.getCurrentTime()));
      }
    }
  });
});</script>

<h1>YouTube Video Timer</h1>

<form>
  <label>Video ID or URL: <input name="videoId" value="https://youtu.be/3gJHBA1go5I" /></label>
  <button type="submit">Load</button>
</form>

<main id="main" disabled>
  <p>
    You can use <kbd>,</kbd> and <kbd>.</kbd> to seek backwards
    and forwards by single frames in the YouTube player after
    clicking on it to pause the video.
  </p>

  <p>
    <label>Start Time: <input id="startTime" placeholder="1.000" /></label> <button id="startCap">Get Video Timestamp</button> <br />
    <label>End Time: <input id="endTime" placeholder="120.000" /></label> <button id="endCap">Get Video Timestamp</button> <br />
    <label>Elapsed Time: <input id="elapsedTime" placeholder="119.00" /></label>
  </p>
</main>

<style>
  html {
    font-family: Georgia, serif;
  }
  
  body {
    max-width: 800px;
  }
  
  kbd {
    border: 2px outset #CCC;
    padding: 0px 2px;
    background: #EEE
  }
  
  main[disabled] {
    pointer-events: none;
    opacity: 0.25;
    cursor: not-allowed;
    user-select: none;
  }
</style>
  